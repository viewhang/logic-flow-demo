(function(t){function e(e){for(var o,r,l=e[0],c=e[1],s=e[2],d=0,f=[];d<l.length;d++)r=l[d],Object.prototype.hasOwnProperty.call(n,r)&&n[r]&&f.push(n[r][0]),n[r]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(t[o]=c[o]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,s||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,l=1;l<a.length;l++){var c=a[l];0!==n[c]&&(o=!1)}o&&(i.splice(e--,1),t=r(r.s=a[0]))}return t}var o={},n={app:0},i=[];function r(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=o,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)r.d(a,o,function(e){return t[e]}.bind(null,o));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var s=0;s<l.length;s++)e(l[s]);var u=c;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"43fe":function(t,e,a){"use strict";a("d3a5")},5300:function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("LF")],1)},i=[],r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"logic-flow-view"},[t.lf?a("Control",{attrs:{lf:t.lf},on:{catData:t.catData}}):t._e(),a("NodePanel",{attrs:{lf:t.lf}}),a("div",{attrs:{id:"LF-view"}}),a("a-drawer",{attrs:{title:"设置节点属性",visible:t.dialogVisible,width:"300"},on:{close:t.closeDialog}},[t.dialogVisible?a("PropertyDialog",{attrs:{"node-data":t.clickNode,lf:t.lf},on:{setPropertiesFinish:t.closeDialog}}):t._e()],1),a("a-modal",{attrs:{title:"查看数据",width:"50%","ok-text":"复制"},on:{ok:t.copyValue},model:{value:t.dataVisible,callback:function(e){t.dataVisible=e},expression:"dataVisible"}},[a("DataDialog",{attrs:{"graph-data":t.graphData}})],1)],1)},l=[],c=a("5530"),s=a("5e90"),u=a.n(s),d=a("eb21"),f=(a("7692"),a("417c"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"node-panel"},t._l(t.nodeList,(function(e){return a("div",{key:e.text,staticClass:"node-item",on:{mousedown:function(a){return t.onDragNode(e)}}},[a("div",{staticClass:"node-item-icon",class:e.class}),a("span",{staticClass:"node-label"},[t._v(t._s(e.text))])])})),0)}),p=[],b={name:"NodePanel",props:{lf:Object},data:function(){return{nodeList:[{text:"开始",type:"start",class:"node-start"},{text:"处理",type:"task",class:"node-task"},{type:"decision",text:"判断",class:"node-decision"},{type:"replication",text:"重复",class:"node-replication"},{type:"concurrency",text:"并行",class:"node-concurrency"},{type:"end",text:"结束",class:"node-end"}]}},methods:{onDragNode:function(t){this.lf.dnd.startDrag({type:t.type,text:t.label})}}},h=b,m=(a("5b8b"),a("2877")),y=Object(m["a"])(h,f,p,!1,null,null,null),v=y.exports,g=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"control-bar"},[a("div",{staticClass:"control-item",on:{click:t.openSelection}},[a("a-icon",{attrs:{type:"select"}}),a("span",{staticClass:"control-text"},[t._v("选区")])],1),a("div",{staticClass:"control-item",on:{click:t.onZoomIn}},[a("a-icon",{attrs:{type:"zoom-in"}}),a("span",{staticClass:"control-text"},[t._v("放大")])],1),a("div",{staticClass:"control-item",on:{click:t.onZoomOut}},[a("a-icon",{attrs:{type:"zoom-out"}}),a("span",{staticClass:"control-text"},[t._v("缩小")])],1),a("div",{staticClass:"control-item",on:{click:t.onReset}},[a("a-icon",{attrs:{type:"pic-center"}}),a("span",{staticClass:"control-text"},[t._v("自适应")])],1),a("div",{staticClass:"control-item",style:t.undoDisable?"cursor: not-allowed;color: #7d7d7d;background:hsla(0, 0%, 100%, 0.7)":"",on:{click:t.onUndo}},[a("a-icon",{attrs:{type:"left"}}),a("span",{staticClass:"control-text"},[t._v("上一步")])],1),a("div",{staticClass:"control-item",style:t.redoDisable?"cursor: not-allowed;color: #7d7d7d;background:hsla(0, 0%, 100%, 0.7)":"",on:{click:t.onRedo}},[a("a-icon",{attrs:{type:"right"}}),a("span",{staticClass:"control-text"},[t._v("下一步")])],1),a("div",{staticClass:"control-item",on:{click:t.onDownload}},[a("a-icon",{attrs:{type:"file-image"}}),a("span",{staticClass:"control-text"},[t._v("导出图片")])],1),a("div",{staticClass:"control-item",on:{click:t.onCatData}},[a("a-icon",{attrs:{type:"eye"}}),a("span",{staticClass:"control-text"},[t._v("查看")])],1)])},x=[],k={name:"Control",props:{lf:Object||String},data:function(){return{undoDisable:!0,redoDisable:!0,graphData:null,dataVisible:!1}},mounted:function(){var t=this;this.lf.on("history:change",(function(e){var a=e.data,o=a.undoAble,n=a.redoAble;t.undoDisable=!o,t.redoDisable=!n}))},methods:{openSelection:function(){this.lf.updateEditConfig({stopMoveGraph:!0,extraConf:{openSelectionMode:!0}})},onZoomIn:function(){this.lf.zoom(!0)},onZoomOut:function(){this.lf.zoom(!1)},onReset:function(){this.lf.resetZoom(),this.lf.resetTranslate()},onUndo:function(){this.undoDisable||this.lf.undo()},onRedo:function(){this.redoDisable||this.lf.redo()},onDownload:function(){this.lf.getSnapshot()},onCatData:function(){this.$emit("catData")}}},O=k,D=(a("43fe"),Object(m["a"])(O,g,x,!1,null,"cb01b134",null)),j=D.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"property-dialog"},["task"===t.nodeData.type?a("TaskProperty",{attrs:{"node-data":t.nodeData,lf:t.lf},on:{onClose:t.handleClose}}):t._e()],1)},w=[],C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{attrs:{"laba-width":"80px",model:t.formData}},[a("a-form-item",{attrs:{label:"名称"}},[a("a-input",{model:{value:t.formData.name,callback:function(e){t.$set(t.formData,"name",e)},expression:"formData.name"}})],1),a("a-form-item",{attrs:{label:"活动区域"}},[a("a-input",{model:{value:t.formData.region,callback:function(e){t.$set(t.formData,"region",e)},expression:"formData.region"}})],1),a("a-form-item",{attrs:{label:"活动形式"}},[a("a-input",{model:{value:t.formData.type,callback:function(e){t.$set(t.formData,"type",e)},expression:"formData.type"}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)},N=[],A={name:"",props:{nodeData:Object,lf:Object||String},data:function(){return{formData:{name:"",region:"",type:""}}},mounted:function(){var t=this.nodeData.properties;t&&(this.formData=Object.assign({},this.formData,t))},methods:{onSubmit:function(){console.log("submit!");var t=this.nodeData.id;this.lf.setProperties(t,this.formData),this.$emit("onClose")}}},_=A,P=Object(m["a"])(_,C,N,!1,null,"fb2da0d6",null),$=P.exports,z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",{ref:"form",attrs:{model:t.form,"laba-width":"80px"}},[a("a-form-item",{attrs:{label:"活动名称"}},[a("a-input",{model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("a-form-item",{attrs:{label:"活动区域"}},[a("a-select",{attrs:{placeholder:"请选择活动区域"},model:{value:t.form.region,callback:function(e){t.$set(t.form,"region",e)},expression:"form.region"}},[a("a-option",{attrs:{label:"区域一",value:"shanghai"}}),a("a-option",{attrs:{label:"区域二",value:"beijing"}})],1)],1),a("a-form-item",{attrs:{label:"活动时间"}},[a("a-col",{attrs:{span:11}},[a("a-date-picker",{staticStyle:{width:"100%"},attrs:{type:"date",placeholder:"选择日期"},model:{value:t.form.date1,callback:function(e){t.$set(t.form,"date1",e)},expression:"form.date1"}})],1),a("a-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),a("a-col",{attrs:{span:11}},[a("a-time-picker",{staticStyle:{width:"100%"},attrs:{placeholder:"选择时间"},model:{value:t.form.date2,callback:function(e){t.$set(t.form,"date2",e)},expression:"form.date2"}})],1)],1),a("a-form-item",{attrs:{label:"即时配送"}},[a("a-switch",{model:{value:t.form.delivery,callback:function(e){t.$set(t.form,"delivery",e)},expression:"form.delivery"}})],1),a("a-form-item",{attrs:{label:"活动性质"}},[a("a-checkbox-group",{model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},[a("a-checkbox",{attrs:{label:"美食/餐厅线上活动",name:"type"}}),a("a-checkbox",{attrs:{label:"地推活动",name:"type"}}),a("a-checkbox",{attrs:{label:"线下主题活动",name:"type"}}),a("a-checkbox",{attrs:{label:"单纯品牌曝光",name:"type"}})],1)],1),a("a-form-item",{attrs:{label:"特殊资源"}},[a("a-radio-group",{model:{value:t.form.resource,callback:function(e){t.$set(t.form,"resource",e)},expression:"form.resource"}},[a("a-radio",{attrs:{label:"线上品牌商赞助"}}),a("a-radio",{attrs:{label:"线下场地免费"}})],1)],1),a("a-form-item",{attrs:{label:"活动形式"}},[a("a-input",{attrs:{type:"textarea"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)},L=[],M={name:"",props:{nodeData:Object,lf:Object||String},data:function(){return{form:{name:"",region:"",date1:"",date2:"",delivery:!1,type:[],resource:"",desc:""}}},mounted:function(){var t=this.nodeData.properties;t&&(this.form=Object.assign({},this.form,t))},methods:{onSubmit:function(){console.log("submit!");var t=this.nodeData.id;this.lf.setProperties(t,this.form),this.$emit("onClose")}}},R=M,q=Object(m["a"])(R,z,L,!1,null,"49e1f158",null),E=q.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("a-form",[a("a-form-item",{attrs:{label:"处理活动名称"}},[a("a-input",{model:{value:t.formData.taskName,callback:function(e){t.$set(t.formData,"taskName",e)},expression:"formData.taskName"}})],1),a("a-form-item",{attrs:{label:"处理活动标识符"}},[a("a-input",{model:{value:t.formData.taskSid,callback:function(e){t.$set(t.formData,"taskSid",e)},expression:"formData.taskSid"}})],1),a("a-form-item",{attrs:{label:"处理人表达式"}},[a("a-textarea",{attrs:{"auto-size":{minRows:3,maxRows:5}},model:{value:t.formData.taskActorExpression,callback:function(e){t.$set(t.formData,"taskActorExpression",e)},expression:"formData.taskActorExpression"}})],1),a("a-form-item",{attrs:{label:"允许转交"}},[a("a-switch",{attrs:{"checked-children":"允许","un-checked-children":"禁止"},model:{value:t.formData.taskAllowDeliver,callback:function(e){t.$set(t.formData,"taskAllowDeliver",e)},expression:"formData.taskAllowDeliver"}})],1),a("a-form-item",{attrs:{label:"允许撤回"}},[a("a-switch",{attrs:{"checked-children":"允许","un-checked-children":"禁止"},model:{value:t.formData.taskAllowTakeBack,callback:function(e){t.$set(t.formData,"taskAllowTakeBack",e)},expression:"formData.taskAllowTakeBack"}})],1),a("a-form-item",{attrs:{label:"允许终止"}},[a("a-switch",{attrs:{"checked-children":"允许","un-checked-children":"禁止"},model:{value:t.formData.taskAllowStop,callback:function(e){t.$set(t.formData,"taskAllowStop",e)},expression:"formData.taskAllowStop"}})],1),a("a-form-item",[a("a-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("保存")])],1)],1)],1)},I=[],T={name:"",props:{nodeData:Object,lf:Object||String},data:function(){return{formData:{}}},mounted:function(){if(this.nodeData){var t=Object(c["a"])({},this.nodeData),e=t?t.properties:{};this.formData=Object(c["a"])({},e),this.formData.taskName=t.text.value}},methods:{onSubmit:function(){var t=this.nodeData.id;this.lf.setProperties(t,this.formData),this.lf.updateText(t,this.formData.taskName),this.$emit("onClose")}}},W=T,B=Object(m["a"])(W,V,I,!1,null,"46107e12",null),F=B.exports,U={name:"PropertyDialog",components:{CommonProperty:$,User:E,TaskProperty:F},props:{nodeData:Object,lf:Object},data:function(){return{}},methods:{handleClose:function(){this.$emit("setPropertiesFinish")}}},J=U,Z=Object(m["a"])(J,S,w,!1,null,null,null),G=Z.exports,H=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticStyle:{height:"500px","overflow-y":"scroll"}},[a("vue-json-pretty",{attrs:{path:"res",data:t.graphData}})],1)},K=[],Q=a("838b"),X=a.n(Q),Y=(a("b83f"),{components:{VueJsonPretty:X.a},props:{graphData:Object}}),tt=Y,et=Object(m["a"])(tt,H,K,!1,null,"41bf9230",null),at=et.exports,ot=a("45eb"),nt=a("7e84"),it=a("d4ec"),rt=a("bee2"),lt=a("262e"),ct=a("2caf");a("cb29");function st(t){t.register("start",(function(t){var e=t.CircleNode,a=t.CircleNodeModel,o=t.h,n=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(){return Object(it["a"])(this,a),e.apply(this,arguments)}return Object(rt["a"])(a,[{key:"getLabelShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return o("text",{fill:"#000000",fontSize:12,x:e-12,y:a+4,width:50,height:25},"开始")}},{key:"getShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y,n=t.r,i=t.fill,r=t.strokeWidth;return o("g",{},[o("circle",{cx:e,cy:a,r:n,fill:i,fillOpacity:.3,stroke:i,strokeWidth:r}),this.getLabelShape()])}}]),a}(e),i=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(t,o){return Object(it["a"])(this,a),t.text={value:t.text&&t.text.value||"",x:t.x,y:t.y+35,dragable:!1,editable:!1},e.call(this,t,o)}return Object(rt["a"])(a,[{key:"getConnectedTargetRules",value:function(){var t=Object(ot["a"])(Object(nt["a"])(a.prototype),"getConnectedTargetRules",this).call(this),e={message:"起始节点不能作为连线的终点",validate:function(){return!1}};return t.push(e),t}}]),a}(a);return{view:n,model:i}}))}a("99af"),a("a15b"),a("d81d");function ut(t){t.register("end",(function(t){var e=t.CircleNode,a=t.CircleNodeModel,o=t.h,n=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(){return Object(it["a"])(this,a),e.apply(this,arguments)}return Object(rt["a"])(a,[{key:"getLabelShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return o("text",{fill:"#000000",fontSize:12,x:e-12,y:a+4,width:50,height:25},"结束")}},{key:"getShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y,n=t.r,i=t.fill,r=(t.stroke,t.strokeWidth);return o("g",{},[o("circle",{cx:e,cy:a,r:n,fill:i,fillOpacity:.3,stroke:i,strokeWidth:r}),this.getLabelShape()])}}]),a}(e),i=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(t,o){return Object(it["a"])(this,a),t.text={value:t.text&&t.text.value||"",x:t.x,y:t.y+35,dragable:!1,editable:!1},e.call(this,t,o)}return Object(rt["a"])(a,[{key:"getConnectedSourceRules",value:function(){var t=Object(ot["a"])(Object(nt["a"])(a.prototype),"getConnectedSourceRules",this).call(this),e={message:"结束节点不能作为其他节点的开始",validate:function(){return!1}};return t.push(e),t}}]),a}(a);return{view:n,model:i}}))}function dt(t){t.register("task",(function(t){var e=t.RectNode,a=t.RectNodeModel,o=t.h,n=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(){return Object(it["a"])(this,a),e.apply(this,arguments)}return Object(rt["a"])(a,[{key:"getNameLabelShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return o("text",{fontSize:12,x:e-12,y:a-12},"审批")}},{key:"getShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return o("g",{},[o("rect",Object(c["a"])(Object(c["a"])({},t),{},{x:e-t.width/2,y:a-t.height/2,stroke:"#5eb36c",fill:"#5eb36c",fillOpacity:.3,rx:8,ry:8,strokeWidth:1})),this.getNameLabelShape()])}}]),a}(e),i=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(t,o){return Object(it["a"])(this,a),t.text={value:t.text&&t.text.value||"未命名",x:t.x,y:t.y+8,dragable:!1,editable:!0},e.call(this,t,o)}return a}(a);return{view:n,model:i}}))}function ft(t){t.register("decision",(function(t){var e=t.PolygonNode,a=t.PolygonNodeModel,o=t.h,n=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(){return Object(it["a"])(this,a),e.apply(this,arguments)}return Object(rt["a"])(a,[{key:"getNameLabelShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return o("text",{fill:"#000",fontSize:12,x:e-12,y:a-12},"判断")}},{key:"getShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return o("g",{},[o("polygon",{fill:"#7397f3",stroke:"#7397f3",fillOpacity:.3,points:[[e-50,a],[e,a+50],[e+50,a],[e,a-50]],strokeWidth:1}),this.getNameLabelShape()])}}]),a}(e),i=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(t,o){return Object(it["a"])(this,a),t.text={value:t.text&&t.text.value||"未命名",x:t.x,y:t.y+12,dragable:!0,editable:!0},e.call(this,t,o)}return a}(a);return{view:n,model:i}}))}function pt(t,e,a){t.register("replication",(function(t){var o=t.RectNode,n=t.RectNodeModel,i=t.h,r=function(t){Object(lt["a"])(n,t);var o=Object(ct["a"])(n);function n(){return Object(it["a"])(this,n),o.apply(this,arguments)}return Object(rt["a"])(n,[{key:"getNameLabelShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return i("text",{fill:"#000",fontSize:12,x:e-12,y:a-12},"重复")}},{key:"getAddSubButtonRect",value:function(){var t=this.getAttributes(),o=t.x,n=t.y;return i("rect",Object(c["a"])(Object(c["a"])({},t),{},{x:o-6,y:n+19,strokeWidth:0,class:"replication-node-sub",width:12,height:12,opacity:0,onClick:function(a){return e(a,t)},onMousedown:function(e){return a(e,t)},onMouseUp:function(e){return a(e,t)}}))}},{key:"getAddSubShape",value:function(){var t=this.getAttributes(),o=t.x,n=t.y,r="#666";return i("svg",{x:o-6,y:n+20,width:12,height:12,viewBox:"0 0 1024 1024",class:"replication-node-sub-svg",onClick:function(a){return e(a,t)},onMousedown:function(e){return a(e,t)},onMouseUp:function(e){return a(e,t)}},i("path",{fill:r,d:"m56.32,81.92l71.68,0l0,896l-71.68,0l0,-896z"}),i("path",{fill:r,d:"m92.16,92.16m-92.16,0a92.16,92.16 0 1 0 184.32,0a92.16,92.16 0 1 0 -184.32,0z"}),i("path",{fill:r,d:"m92.16,522.24m-92.16,0a92.16,92.16 0 1 0 184.32,0a92.16,92.16 0 1 0 -184.32,0z"}),i("path",{fill:r,d:"m92.16,931.84m-92.16,0a92.16,92.16 0 1 0 184.32,0a92.16,92.16 0 1 0 -184.32,0z"}),i("path",{fill:r,d:"m327.68,71.68l624.64,0c39.58784,0 71.68,32.09216 71.68,71.68l0,61.44c0,39.58784 -32.09216,71.68 -71.68,71.68l-696.32,0l0,-133.12c0,-39.58784 32.09216,-71.68 71.68,-71.68zm0,337.92l112.64,0c39.58784,0 71.68,32.09216 71.68,71.68l0,61.44c0,39.58784 -32.09216,71.68 -71.68,71.68l-184.32,0l0,-133.12c0,-39.58784 32.09216,-71.68 71.68,-71.68zm0,337.92l112.64,0c39.58784,0 71.68,32.09216 71.68,71.68l0,61.44c0,39.58784 -32.09216,71.68 -71.68,71.68l-184.32,0l0,-133.12c0,-39.58784 32.09216,-71.68 71.68,-71.68z"}),i("path",{fill:r,d:"m583.68,609.28m66.56,0l307.2,0q66.56,0 66.56,66.56l0,0q0,66.56 -66.56,66.56l-307.2,0q-66.56,0 -66.56,-66.56l0,0q0,-66.56 66.56,-66.56z"}),i("path",{fill:r,d:"m737.28,409.6m66.56,0l0,0q66.56,0 66.56,66.56l0,399.36q0,66.56 -66.56,66.56l0,0q-66.56,0 -66.56,-66.56l0,-399.36q0,-66.56 66.56,-66.56z"}))}},{key:"getRect",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return i("rect",Object(c["a"])(Object(c["a"])({},t),{},{x:e-t.width/2,y:a-t.height/2,stroke:"#a273c2",fill:"#a273c2",fillOpacity:.3,rx:8,ry:8,strokeWidth:1,class:"replication-node"}))}},{key:"getShape",value:function(){var t=this.getAttributes();t.isHovered;return i("g",{},[this.getRect(),this.getNameLabelShape(),this.getAddSubButtonRect(),this.getAddSubShape()])}}]),n}(o),l=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(t,o){return Object(it["a"])(this,a),t.text={value:t.text&&t.text.value||"未命名",x:t.x,y:t.y+8,dragable:!1,editable:!0},e.call(this,t,o)}return a}(n);return{view:r,model:l}}))}function bt(t,e,a){t.register("concurrency",(function(t){var o=t.RectNode,n=t.RectNodeModel,i=t.h,r=function(t){Object(lt["a"])(n,t);var o=Object(ct["a"])(n);function n(){return Object(it["a"])(this,n),o.apply(this,arguments)}return Object(rt["a"])(n,[{key:"getNameLabelShape",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return i("text",{fill:"#000",fontSize:12,x:e-12,y:a-12},"并行")}},{key:"getAddSubButtonRect",value:function(){var t=this.getAttributes(),o=t.x,n=t.y;return i("rect",Object(c["a"])(Object(c["a"])({},t),{},{x:o-6,y:n+19,strokeWidth:0,class:"replication-node-sub",width:12,height:12,opacity:0,onClick:function(a){return e(a,t)},onMousedown:function(e){return a(e,t)},onMouseUp:function(e){return a(e,t)}}))}},{key:"getAddSubShape",value:function(){var t=this.getAttributes(),o=t.x,n=t.y,r="#666";return i("svg",{x:o-6,y:n+20,width:12,height:12,viewBox:"0 0 1024 1024",class:"replication-node-sub-svg",onClick:function(a){return e(a,t)},onMousedown:function(e){return a(e,t)},onMouseUp:function(e){return a(e,t)}},i("path",{fill:r,d:"m56.32,81.92l71.68,0l0,896l-71.68,0l0,-896z"}),i("path",{fill:r,d:"m92.16,92.16m-92.16,0a92.16,92.16 0 1 0 184.32,0a92.16,92.16 0 1 0 -184.32,0z"}),i("path",{fill:r,d:"m92.16,522.24m-92.16,0a92.16,92.16 0 1 0 184.32,0a92.16,92.16 0 1 0 -184.32,0z"}),i("path",{fill:r,d:"m92.16,931.84m-92.16,0a92.16,92.16 0 1 0 184.32,0a92.16,92.16 0 1 0 -184.32,0z"}),i("path",{fill:r,d:"m327.68,71.68l624.64,0c39.58784,0 71.68,32.09216 71.68,71.68l0,61.44c0,39.58784 -32.09216,71.68 -71.68,71.68l-696.32,0l0,-133.12c0,-39.58784 32.09216,-71.68 71.68,-71.68zm0,337.92l112.64,0c39.58784,0 71.68,32.09216 71.68,71.68l0,61.44c0,39.58784 -32.09216,71.68 -71.68,71.68l-184.32,0l0,-133.12c0,-39.58784 32.09216,-71.68 71.68,-71.68zm0,337.92l112.64,0c39.58784,0 71.68,32.09216 71.68,71.68l0,61.44c0,39.58784 -32.09216,71.68 -71.68,71.68l-184.32,0l0,-133.12c0,-39.58784 32.09216,-71.68 71.68,-71.68z"}),i("path",{fill:r,d:"m583.68,609.28m66.56,0l307.2,0q66.56,0 66.56,66.56l0,0q0,66.56 -66.56,66.56l-307.2,0q-66.56,0 -66.56,-66.56l0,0q0,-66.56 66.56,-66.56z"}),i("path",{fill:r,d:"m737.28,409.6m66.56,0l0,0q66.56,0 66.56,66.56l0,399.36q0,66.56 -66.56,66.56l0,0q-66.56,0 -66.56,-66.56l0,-399.36q0,-66.56 66.56,-66.56z"}))}},{key:"getRect",value:function(){var t=this.getAttributes(),e=t.x,a=t.y;return i("rect",Object(c["a"])(Object(c["a"])({},t),{},{x:e-t.width/2,y:a-t.height/2,stroke:"#949c9d",fill:"#949c9d",fillOpacity:.3,rx:8,ry:8,strokeWidth:1,class:"concurrency-node"}))}},{key:"getShape",value:function(){var t=this.getAttributes();t.isHovered;return i("g",{},[this.getRect(),this.getNameLabelShape(),this.getAddSubButtonRect(),this.getAddSubShape()])}}]),n}(o),l=function(t){Object(lt["a"])(a,t);var e=Object(ct["a"])(a);function a(t,o){return Object(it["a"])(this,a),t.text={value:t.text&&t.text.value||"未命名",x:t.x,y:t.y+8,dragable:!1,editable:!0},e.call(this,t,o)}return a}(n);return{view:r,model:l}}))}var ht=a("cfcc"),mt={name:"LF",components:{NodePanel:v,Control:j,PropertyDialog:G,DataDialog:at},data:function(){return{lf:null,addClickNode:null,clickNode:null,dialogVisible:!1,graphData:null,dataVisible:!1}},mounted:function(){this.initLf()},methods:{initLf:function(){var t={container:document.querySelector("#LF-view"),background:{color:"#fff"},grid:{size:10},keyboard:{enabled:!0},guards:{}};u.a.use(d["a"]),u.a.use(d["b"]),u.a.use(d["e"]),u.a.use(d["d"]),u.a.use(d["c"]);var e=new u.a(Object(c["a"])({},t));this.lf=e,e.setMenuConfig({nodeMenu:[{icon:!0,className:"lf-menu-delete",text:"删除",callback:function(t){e.deleteNode(t.id)}}],graphMenu:[]}),e.setTheme({circle:{r:25,fill:"#f56141",strokeWidth:1},polygon:{strokeWidth:1},polyline:{strokeWidth:1}}),this.registerNode(),d["b"].show()},registerNode:function(){st(this.lf),dt(this.lf),ft(this.lf),pt(this.lf,this.clickAddSub,this.mouseDownAddSub),bt(this.lf,this.clickAddSub,this.mouseDownAddSub),ut(this.lf),this.render()},render:function(){this.lf.render(ht),this.LfEvent()},getData:function(){var t=this.lf.getGraphData();console.log(JSON.stringify(t))},LfEvent:function(){var t=this;this.lf.on("selection:selected",(function(){t.lf.updateEditConfig({stopMoveGraph:!1,extraConf:{openSelectionMode:!1}})})),this.lf.on("node:click",(function(e){console.log("node:click",e.data),t.clickNode=e.data,"start"!==t.clickNode.type&&"end"!==t.clickNode.type&&(t.dialogVisible=!0)})),this.lf.on("edge:click",(function(e){var a=e.data;t.clickNode=a,t.dialogVisible=!0})),this.lf.on("connection:not-allowed",(function(e){t.$message.error(e.msg)}))},clickAddSub:function(t,e){t.stopPropagation(),console.log("添加子流程事件",t,e),this.$message.info("添加子流程事件")},mouseDownAddSub:function(t,e){t.stopPropagation(),console.log("mouseDownAddSub",t,e)},closeDialog:function(){this.dialogVisible=!1},catData:function(){this.graphData=this.lf.getGraphData(),this.dataVisible=!0},copyValue:function(){try{var t=document.createElement("input");document.body.appendChild(t),t.setAttribute("value",JSON.stringify(this.graphData)),t.select(),document.execCommand("copy")&&(document.execCommand("copy"),this.$message.success("复制成功")),document.body.removeChild(t)}catch(e){this.$message.error(e.message)}}}},yt=mt,vt=(a("78cd"),Object(m["a"])(yt,r,l,!1,null,null,null)),gt=vt.exports,xt={name:"App",components:{LF:gt}},kt=xt,Ot=(a("034f"),Object(m["a"])(kt,n,i,!1,null,null,null)),Dt=Ot.exports,jt=(a("202f"),a("b558")),St=a("3af3"),wt=a("5efb"),Ct=a("ed3b"),Nt=a("0c63"),At=a("9571"),_t=a("160c"),Pt=a("f64c");o["a"].config.productionTip=!1,o["a"].use(jt["a"]),o["a"].use(St["a"]),o["a"].use(wt["a"]),o["a"].use(Ct["a"]),o["a"].use(Nt["a"]),o["a"].use(At["a"]),o["a"].use(_t["a"]),o["a"].use(Pt["a"]),o["a"].prototype.$message=Pt["a"],new o["a"]({render:function(t){return t(Dt)}}).$mount("#app")},"5b8b":function(t,e,a){"use strict";a("5300")},"78cd":function(t,e,a){"use strict";a("9aae")},"85ec":function(t,e,a){},"9aae":function(t,e,a){},cfcc:function(t){t.exports=JSON.parse('{"nodes":[{"id":"742356ea-762b-4899-b96a-bd567e3c4361","type":"start","x":220,"y":170,"properties":{}},{"id":"dacda6b6-48d3-4dff-911d-287704eb23d8","type":"task","x":350,"y":170,"properties":{},"text":{"x":350,"y":178,"value":"基础节点"}},{"id":"49106603-2b88-4b2c-b1e8-723c1f2210bd","type":"decision","x":530,"y":170,"properties":{},"text":{"x":530,"y":182,"value":"请假大于5天"}},{"id":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","type":"replication","x":690,"y":170,"properties":{},"text":{"x":690,"y":178,"value":"部门领导会签"}},{"id":"60326ad9-cae2-4a85-ae98-d340fb7bd67f","type":"end","x":870,"y":170,"properties":{}},{"id":"a110a936-cebf-4c79-a516-1ad2600d9330","type":"task","x":530,"y":310,"properties":{},"text":{"x":530,"y":318,"value":"领导审批"}},{"id":"ca9da013-891e-4bc3-842d-484e4cfca4c4","type":"end","x":670,"y":310,"properties":{}}],"edges":[{"id":"00f55245-513e-43a2-9cb0-adb61b01adc8","type":"polyline","sourceNodeId":"742356ea-762b-4899-b96a-bd567e3c4361","targetNodeId":"dacda6b6-48d3-4dff-911d-287704eb23d8","startPoint":{"x":240,"y":170},"endPoint":{"x":300,"y":170},"properties":{},"pointsList":[{"x":240,"y":170},{"x":300,"y":170}]},{"id":"122ff086-d1a1-416f-b57d-285b78ef818a","type":"polyline","sourceNodeId":"dacda6b6-48d3-4dff-911d-287704eb23d8","targetNodeId":"49106603-2b88-4b2c-b1e8-723c1f2210bd","startPoint":{"x":400,"y":170},"endPoint":{"x":480,"y":170},"properties":{},"pointsList":[{"x":400,"y":170},{"x":480,"y":170}]},{"id":"b49ea30c-d09e-4747-8566-9b7ea1d3fbfe","type":"polyline","sourceNodeId":"49106603-2b88-4b2c-b1e8-723c1f2210bd","targetNodeId":"a110a936-cebf-4c79-a516-1ad2600d9330","startPoint":{"x":530,"y":220},"endPoint":{"x":530,"y":270},"properties":{},"text":{"x":530,"y":244,"value":"否"},"pointsList":[{"x":530,"y":220},{"x":530,"y":250},{"x":530,"y":250},{"x":530,"y":240},{"x":530,"y":240},{"x":530,"y":270}]},{"id":"df1cdcef-1044-42b1-92e0-19d08d776bef","type":"polyline","sourceNodeId":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","targetNodeId":"60326ad9-cae2-4a85-ae98-d340fb7bd67f","startPoint":{"x":740,"y":170},"endPoint":{"x":845,"y":170},"properties":{},"pointsList":[{"x":740,"y":170},{"x":845,"y":170}]},{"id":"d71197e8-b1d6-446f-a262-2ef71c89c3ea","type":"polyline","sourceNodeId":"49106603-2b88-4b2c-b1e8-723c1f2210bd","targetNodeId":"647fa2bc-98ee-40cf-99c5-4756c0bc130d","startPoint":{"x":580,"y":170},"endPoint":{"x":640,"y":170},"properties":{},"text":{"x":607,"y":170,"value":"是"},"pointsList":[{"x":580,"y":170},{"x":640,"y":170}]},{"id":"ccdeb796-24db-4943-9ed9-9b85ef706f3f","type":"polyline","sourceNodeId":"a110a936-cebf-4c79-a516-1ad2600d9330","targetNodeId":"ca9da013-891e-4bc3-842d-484e4cfca4c4","startPoint":{"x":580,"y":310},"endPoint":{"x":645,"y":310},"properties":{},"pointsList":[{"x":580,"y":310},{"x":645,"y":310}]}]}')},d3a5:function(t,e,a){}});
//# sourceMappingURL=app.af372b18.js.map